<!DOCTYPE html>
<html
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
<meta charset="UTF-8" />
		<h:outputStylesheet name="css/css.css" />
		<h:outputStylesheet name="css/bootstrap.min.css" target="head" />
		<h:outputStylesheet name="css/jquery-ui.min.css" />
		<h:outputStylesheet name="css/fullcalendar.min.css" />
		<h:outputStylesheet name="css/jquery.datetimepicker.css" />
<title>Insert title here</title>
</h:head>
<body>
<ui:include src="header.xhtml"></ui:include>
<div class="container">
			<div class="row">
				<div class="col-md-12 text-center">
					<div class="well well-sm" style="opacity: 0.6">
						<h3>Consultation</h3>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<div id="calendar" class="consult-trajet"></div>
				</div>
			</div>
			<div class="modal fade" id="modal-trajet">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<div class="modal-title"></div>
						</div>
						<div class="modal-body">
							<h:form id="form-lecture" class="form form-vertical">
								<div class="form-group">
									<label for="prix">Prix : </label>
									<h:inputText type="text" class="form-control" id="prix"></h:inputText>
								</div>
								<div class="form-group">
									<label for="date">Date : </label>
									<h:inputText type="text" class="form-control" id="date"> </h:inputText>
								</div>
								<div class="form-group">
									<label for="heureDepart">L'heure de départ : </label>
									<h:inputText type="text" class="form-control" id="heureDepart"></h:inputText>
								</div>
								<div class="form-group">
									<h3>Liste des arrêts</h3>
									<h:dataTable id="listeTrajet" styleClass="table table-striped">
										
									</h:dataTable>
								</div>
							</h:form>
						</div>
						<div class="modal-footer">
							<div class="row text-center">
								<div class="col-md-4">
									<input type="button" class="btn btn-default" value="Annuler" />
								</div>
								<div class="col-md-4">
									<input type="button" class="btn btn-success" value="Valider" />
								</div>
								<div class="col-md-4">
									<input type="button" class="btn btn-danger" value="Supprimer" />
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!--<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places"></script>-->
		<h:outputScript name="js/jquery.min.js" />
		<h:outputScript name="js/jquery-ui.min.js" />
		<h:outputScript name="js/bootstrap.min.js" />
		<h:outputScript name="js/moment.min.js" />
		<h:outputScript name="js/fullcalendar.min.js" />
		<h:outputScript name="js/jquery.datetimepicker.js" />
		<script>
			$(function() {
				$("#calendar").fullCalendar({
					eventClick : function(calEvent, jsEvent, view) {
						var modalTrajet = $("#modal-trajet");
						modalTrajet.find(".modal-title").text("Trajet");
						$("#form-lecture\\:prix").val(calEvent.prix);
						$("#form-lecture\\:heureDepart").val(calEvent.start);
						$("#form-lecture\\:date").val(calEvent.date);
						var listeTrajet = $("#form-lecture\\:listeTrajet").children();
						var tabTrajet = calEvent.listeArret;
						
						listeTrajet.html("");
						for (var i = 0; i &lt; tabTrajet.length; i++) {
							listeTrajet.append("<tr><td>"+ tabTrajet[i] +"</td></tr>")
						}
						
						modalTrajet.modal("show");
					},
					 events: "http://localhost:8080/pCovoiturage/services/trajet/#{utilisateur.email}"
				});
				
				$("#form-lecture\\:heureDepart").datetimepicker({
					datepicker:false,
					format:'H:i'
				});
			});
		</script>
</body>
</html>